<app-sidebar></app-sidebar>
<div id="content">
    <app-navbar></app-navbar>
    <div class="container p-3">
        <h4 class="text-center ml-auto">{{ 'createPrescription.title' | translate}}</h4>
        <div class=" w-75 text-justified ml-5  mb-2 mt-0 text-secondary">
            <p class="my-1">{{todaysDate}}</p>
            <p class="my-1">{{drName}}</p>
            <p class="my-1">{{institute}}</p>
        </div>
        <div class="lineDividerBlue mt-3 mb-3"></div>
        <div class="w-75 mx-auto">
            <form [formGroup]="createPrescriptionForm" action="../html/drPatientInfo.html">
                <mat-form-field class="w-100">
                    <label for="title">{{ 'createPrescription.labelTitle' | translate}} </label>
                    <input matInput [formControl]="prescriptionTitleControl" formControlName="title" required>
                </mat-form-field>
                <mat-form-field class="w-100">
                    <label for="title">{{ 'createPrescription.labelDiagnosis' | translate}} </label>
                    <textarea required matInput [formControl]="prescriptionDiagnosisControl" formControlName="diagnosis" rows="5"></textarea>
                </mat-form-field>
                <div class="row mt-3">
                    <div class="col-12 col-md-6">
                        <mat-form-field>
                            <mat-select [formControl]="medControl" (selectionChange)="selected($event)" placeholder="{{ 'createPrescription.selectPlaceholder' | translate}}" [multiple]="true" #multiSelect>
                                <ngx-mat-select-search [formControl]="medFilter" [placeholderLabel]="search" [noEntriesFoundLabel]="noneFound">
                                </ngx-mat-select-search>
                                <mat-option *ngFor="let medicine of filteredMeds | async" [value]="medicine">
                                    {{medicine.name}}
                                </mat-option>
                            </mat-select>
                        </mat-form-field>
                    </div>
                    <div class="col-12 col-md-6 my-2 my-md-0">
                        <h5>{{ 'createPrescription.selectListTitle' | translate}} </h5>
                        <ul *ngFor="let medicine of medControl?.value" class="list-unstyled">
                            <li>{{medicine.name}}</li>
                        </ul>
                    </div>
                </div>



                <button type="submit" (click)="onClickSubmit(prescriptionTitleControl.value, prescriptionDiagnosisControl.value)" title="Confirmar Receta" class="btn btn-primary mb-5 mx-auto d-block">{{ 'createPrescription.button' | translate}}</button>
            </form>

        </div>
    </div>

</div>